{{- $bvid := .Get "bvid" -}}
{{- $aid := .Get "aid" -}}
{{- $cid := .Get "cid" -}}
{{- $p := .Get "p" | default "1" -}}
{{- $width := .Get "width" | default "100%" -}}
{{- $height := .Get "height" | default "500px" -}}
{{- $autoplay := .Get "autoplay" | default "false" -}}

{{- if $bvid -}}
<div class="bilibili-video" style="position: relative; width: {{ $width }}; height: {{ $height }}; margin: 1rem 0;">
  <iframe 
    src="//player.bilibili.com/player.html?isOutside=true{{- if $aid -}}&aid={{ $aid }}{{- end -}}&bvid={{ $bvid }}{{- if $cid -}}&cid={{ $cid }}{{- end -}}&p={{ $p }}{{- if eq $autoplay "true" -}}&autoplay=1{{- end -}}" 
    scrolling="no" 
    border="0" 
    frameborder="no" 
    framespacing="0" 
    allowfullscreen="true"
    style="width: 100%; height: 100%; border-radius: 8px;"
    loading="lazy">
  </iframe>
</div>
{{- else -}}
<p style="color: red;">错误：需要提供 bvid 参数</p>
{{- end -}} 